<% tables.each do |table| -%>
  resource "aws_dynamodb_table" "<%= module_name_of(table) %>" {
    name                        = "<%= module_name_of(table) %>"
    read_capacity               = "<%= table.table.provisioned_throughput.read_capacity_units %>"
    write_capacity              = "<%= table.table.provisioned_throughput.write_capacity_units %>"
  <% table.table.key_schema.each do |key_schema| -%>
    <% if key_schema.key_type ==  "HASH" %>
    hash_key = "<%= key_schema.attribute_name %>"
    <% end -%>
  <% end -%>

  <% table.table.attribute_definitions.each do |attribute| -%>
    attribute {
      "name" = "<%= attribute.attribute_name %>"
      "type" = "<%= attribute.attribute_type %>"
    }

<% end -%>
  }
<% end -%>